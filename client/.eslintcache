[{"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\index.js":"1","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\App.js":"2","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\components\\Canvas.js":"3","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\components\\Toolbar.js":"4","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\components\\SettingsBar.js":"5","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\store\\canvasState.js":"6","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\store\\toolState.js":"7","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Brush.js":"8","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Rect.js":"9","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Line.js":"10","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Eraser.js":"11","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Circle.js":"12","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Tool.js":"13","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\globalVars.js":"14"},{"size":364,"mtime":1609701483286,"results":"15","hashOfConfig":"16"},{"size":618,"mtime":1609700258234,"results":"17","hashOfConfig":"16"},{"size":4308,"mtime":1609853291383,"results":"18","hashOfConfig":"16"},{"size":1929,"mtime":1609780200759,"results":"19","hashOfConfig":"16"},{"size":733,"mtime":1609853149947,"results":"20","hashOfConfig":"16"},{"size":2194,"mtime":1609853223969,"results":"21","hashOfConfig":"16"},{"size":420,"mtime":1609693995657,"results":"22","hashOfConfig":"16"},{"size":1652,"mtime":1609850385507,"results":"23","hashOfConfig":"16"},{"size":2250,"mtime":1609850135155,"results":"24","hashOfConfig":"16"},{"size":2103,"mtime":1609851137344,"results":"25","hashOfConfig":"16"},{"size":1724,"mtime":1609782707401,"results":"26","hashOfConfig":"16"},{"size":2259,"mtime":1609850135391,"results":"27","hashOfConfig":"16"},{"size":545,"mtime":1609762066975,"results":"28","hashOfConfig":"16"},{"size":146,"mtime":1609862521325,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"m0g2km",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"32"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\index.js",[],["60","61"],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\App.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\components\\Canvas.js",["62","63","64"],"import React, {useEffect, useRef, useState} from 'react';\r\nimport '../styles/canvas.scss'\r\nimport {observer} from \"mobx-react-lite\";\r\nimport canvasState from \"../store/canvasState\";\r\nimport toolState from \"../store/toolState\";\r\nimport Brush from \"../tools/Brush\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {useParams} from 'react-router-dom'\r\nimport Rect from \"../tools/Rect\";\r\nimport Eraser from \"../tools/Eraser\";\r\nimport axios from 'axios'\r\nimport Circle from \"../tools/Circle\";\r\nimport Line from \"../tools/Line\";\r\nimport GL from \"../globalVars\";\r\n\r\nconst Canvas = observer(() => {\r\n\r\n  const [modal, setModal] = useState(true)\r\n  const usernameRef = useRef()\r\n  const canvasRef = useRef()\r\n  const params = useParams()\r\n\r\n  useEffect(() => {\r\n    if (canvasState.username) {\r\n      canvasState.setCanvas(canvasRef.current)\r\n      let ctx = canvasRef.current.getContext('2d')\r\n      axios.get(`${GL.HOST}/image?id=${params.id}`)\r\n        .then(res => {\r\n          const img = new Image()\r\n          img.src = res.data\r\n          img.onload = () => {\r\n            ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height)\r\n            ctx.drawImage(img, 0, 0, canvasRef.current.width, canvasRef.current.height)\r\n          }\r\n        })\r\n\r\n      const socket = new WebSocket(GL.WS_HOST)\r\n      canvasState.setSocket(socket)\r\n      canvasState.setSessionId(params.id)\r\n      toolState.setTool(new Brush(canvasRef.current, socket, params.id))\r\n      socket.onopen = () => {\r\n        socket.send(JSON.stringify({\r\n          id: params.id,\r\n          username: canvasState.username,\r\n          method: 'connection'\r\n        }))\r\n      }\r\n      socket.onmessage = (e) => {\r\n        let msg = JSON.parse(e.data)\r\n        switch (msg.method) {\r\n          case 'connection':\r\n            break\r\n          case 'draw':\r\n            drawHandler(msg)\r\n            break\r\n          case 'undo':\r\n            canvasState.undo(true)\r\n            break\r\n          case 'redo':\r\n            canvasState.redo(true)\r\n            break\r\n          case 'pushToUndo':\r\n            canvasState.pushToUndo(canvasRef.current.toDataURL(), true)\r\n            break\r\n        }\r\n      }\r\n    }\r\n  }, [canvasState.username])\r\n\r\n  const drawHandler = msg => {\r\n    const figure = msg.figure\r\n    const ctx = canvasRef.current.getContext('2d')\r\n\r\n    switch (figure.type) {\r\n      case \"brush\":\r\n        Brush.staticDraw(ctx, figure.x, figure.y, figure.lineWidth, figure.strokeColor)\r\n        break\r\n      case \"eraser\":\r\n        Eraser.staticDraw(ctx, figure.x, figure.y, figure.lineWidth)\r\n        break\r\n      case \"rect\":\r\n        Rect.staticDraw(ctx, figure.x, figure.y, figure.width, figure.height, figure.color, figure.lineWidth, figure.strokeColor)\r\n        break\r\n      case \"circle\":\r\n        Circle.staticDraw(ctx, figure.x, figure.y, figure.r, figure.color, figure.lineWidth, figure.strokeColor)\r\n        break\r\n      case \"line\":\r\n        Line.staticDraw(ctx, figure.startX, figure.startY, figure.endX, figure.endY, figure.lineWidth, figure.strokeColor)\r\n        break\r\n      case \"finish\":\r\n        ctx.beginPath()\r\n        break\r\n\r\n    }\r\n  }\r\n\r\n  const mouseDownHandler = () => {\r\n    canvasState.pushToUndo(canvasRef.current.toDataURL())\r\n  }\r\n\r\n  const mouseUpHandler = () => {\r\n    axios.post(`${GL.HOST}/image?id=${params.id}`, {img: canvasRef.current.toDataURL()})\r\n  }\r\n\r\n  const connectHandler = () => {\r\n    if (usernameRef.current.value.length !== 0) {\r\n      canvasState.setUsername(usernameRef.current.value)\r\n      setModal(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"canvas\">\r\n      <Modal show={modal} onHide={() => {\r\n      }}>\r\n        <Modal.Header>\r\n          <Modal.Title>Введите ваше имя</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <input required type=\"text\" ref={usernameRef}/>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={() => connectHandler()}>\r\n            Войти\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <canvas onMouseUp={() => mouseUpHandler()} onMouseDown={() => mouseDownHandler()} ref={canvasRef} width={600}\r\n              height={400}/>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Canvas;\r\n","C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\components\\Toolbar.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\components\\SettingsBar.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\store\\canvasState.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\store\\toolState.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Brush.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Rect.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Line.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Eraser.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Circle.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\tools\\Tool.js",[],"C:\\Users\\misha_000\\Desktop\\MY_PROJECT\\react-paint\\client\\src\\globalVars.js",[],{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","severity":1,"message":"70","line":51,"column":9,"nodeType":"71","messageId":"72","endLine":66,"endColumn":10},{"ruleId":"73","severity":1,"message":"74","line":69,"column":6,"nodeType":"75","endLine":69,"endColumn":28,"suggestions":"76"},{"ruleId":"69","severity":1,"message":"70","line":75,"column":5,"nodeType":"71","messageId":"72","endLine":95,"endColumn":6},"no-native-reassign",["77"],"no-negated-in-lhs",["78"],"default-case","Expected a default case.","SwitchStatement","missingDefaultCase","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'params.id'. Either include it or remove the dependency array. Outer scope values like 'canvasState.username' aren't valid dependencies because mutating them doesn't re-render the component.","ArrayExpression",["79"],"no-global-assign","no-unsafe-negation",{"desc":"80","fix":"81"},"Update the dependencies array to be: [params.id]",{"range":"82","text":"83"},[2242,2264],"[params.id]"]